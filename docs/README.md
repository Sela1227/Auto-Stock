# 📚 SELA 文件包

> 整合日期: 2026-01-17  
> 版本: 3.0  
> 整合自: 10+ 份分散文件

---

## 📁 文件結構

```
SELA_文件包/
├── SELA_系統規格書.md           # 架構、資料庫、API 設計
├── SELA_開發指南.md             # Bug 修復、前端優化、Router 統一、UI 指南
├── SELA_部署指南.md             # Railway 部署、遷移、運維
├── SELA_待辦追蹤.md             # P1/P2/P3 優先級待辦
├── SELA_更新日誌.md             # 版本變更紀錄 (CHANGELOG)
├── SELA_開發記錄_20260117.md    # 最新開發記錄
├── SELA_目標價功能修復記錄.md   # 🆕 目標價高於/低於功能
├── SELA_券商功能部署指南.md     # 🆕 券商功能部署步驟
├── SELA_MA強化分析_開發記錄.md  # 🆕 MA 強化分析開發記錄
└── README.md                    # 本文件
```

---

## 📖 文件用途

| 文件 | 適合誰看 | 用途 |
|------|---------|------|
| **系統規格書** | 新開發者 | 了解系統架構、資料庫設計、API 端點 |
| **開發指南** | 開發者 | 查詢 Bug 解法、前端優化方案、程式碼範例 |
| **部署指南** | DevOps | Railway 部署、資料庫遷移、排程設定 |
| **待辦追蹤** | 所有人 | 查看待辦事項、確認優先級 |
| **更新日誌** | 所有人 | 追蹤版本變更、功能新增 |
| **開發記錄** | 開發者 | 最近一次開發的詳細記錄 |
| **目標價功能修復記錄** | 開發者 | 目標價高於/低於提醒功能開發過程 |
| **券商功能部署指南** | 開發者 | 券商關聯交易功能的部署步驟 |
| **MA強化分析開發記錄** | 開發者 | MA 進階分析功能開發過程 |

---

## 🎯 快速查詢

### 我想了解系統架構
→ 看 **SELA_系統規格書.md**

### 我遇到 Bug / 前端問題
→ 看 **SELA_開發指南.md** 第 1-4 章

### 我要統一 Router 認證
→ 看 **SELA_開發指南.md** 第 5 章

### 我要部署到 Railway
→ 看 **SELA_部署指南.md**

### 我要部署券商功能
→ 看 **SELA_券商功能部署指南.md**

### 我想知道接下來做什麼
→ 看 **SELA_待辦追蹤.md**

### 我想知道最近改了什麼
→ 看 **SELA_更新日誌.md** 或 **SELA_開發記錄_20260117.md**

### 我想了解目標價功能
→ 看 **SELA_目標價功能修復記錄.md**

### 我想了解 MA 強化分析
→ 看 **SELA_MA強化分析_開發記錄.md**

---

## ✅ 已完成功能總覽

| 功能 | 說明 | 相關文件 |
|------|------|----------|
| 市場感知快取 | 非交易時段效能提升 10-40x | 開發記錄 |
| 圖表功能修復 | 時間範圍按鈕、MA 均線、圖例點擊 | 開發記錄 |
| 訂閱精選 | 後端 API + 前端 Tab | 系統規格書 |
| 追蹤清單匯出匯入 | JSON/CSV 匯出匯入 | 系統規格書 |
| 持股交易匯出匯入 | JSON/CSV 匯出匯入 | 系統規格書 |
| stock_info 種子表 | 30+ 筆熱門股票預建資料 | 系統規格書 |
| 成交量圖表 | 漲跌顏色柱狀圖 + 20日均量線 | 開發記錄 |
| 熱門追蹤統計 | 顯示最多人追蹤的股票 | 系統規格書 |
| 目標價方向功能 | 高於/低於提醒 | 目標價功能修復記錄 |
| MA 強化分析 | 交叉天數/支撐壓力/多空排列 | MA強化分析開發記錄 |
| 券商功能 | 交易紀錄關聯券商（待部署） | 券商功能部署指南 |

---

## 📝 重要提醒

### 指標欄位名稱
`indicator_service.py` 產生的欄位都是**小寫**：
- `ma20`, `ma50`, `ma200` (不是 `MA20`)
- `rsi` (不是 `RSI`)
- `macd_dif`, `macd_dea`, `macd_hist`
- `kd_k`, `kd_d`

### Railway 資料庫遷移
Railway 一般用戶無法直接執行 SQL，所有遷移必須透過 `database.py` 的 `run_migrations()` 函數。

### LINE Login 多環境
需在 LINE Developers Console 添加每個環境的 Callback URL。

### AppState 快取陷阱
修改資料後必須清除快取：
```javascript
if (window.AppState) {
    AppState.watchlistLoaded = false;
}
await loadWatchlist();
```

---

## 🔗 Memory 同步待辦

以下待辦已同步至 Claude Memory：

> SELA 待辦: P1: (1)追蹤清單載入效能診斷 P2: (2)訂閱排程驗證 (3)前端效能優化 | 已完成:匯出匯入/stock_info種子表/成交量圖表/MA強化分析/熱門追蹤/訂閱Tab/目標價方向/券商功能(待部署)

---

## 📅 更新記錄

| 日期 | 版本 | 內容 |
|------|------|------|
| 2026-01-17 | v3.0 | 新增 MA 強化分析、目標價功能、券商功能文件 |
| 2026-01-17 | v2.0 | 確認多項功能已完成，整合文件 |
| 2026-01-15 | v1.0 | 初始整合 |
