# 🚀 追蹤清單載入速度優化

## 問題原因

原本的 `loadWatchlist()` 函數對每支股票**逐一查詢**（串行）：

```javascript
for (const item of data.data) {
    const priceRes = await fetch(...);  // 等這個完成才查下一個
}
```

追蹤 5 支股票，每支 10-30 秒 = **50-150 秒** 才能載入完成！

## 解決方案

1. **先顯示清單**：立即顯示股票代號，價格顯示「載入中...」
2. **並行載入價格**：使用 `Promise.allSettled()` 同時查詢所有股票
3. **漸進式更新**：每支股票價格載入完成就立即更新顯示

優化後：**3-10 秒** 內顯示所有價格！

## 修改方式

### 步驟 1：找到原本的 loadWatchlist 函數

在 `dashboard.html` 中搜尋：
```javascript
// ========== 追蹤清單 (卡片式) ==========
async function loadWatchlist() {
```

### 步驟 2：替換整個函數

將從 `async function loadWatchlist()` 開始，到函數結束的 `}`，整段替換成 `loadWatchlist_optimized.js` 的內容。

### 步驟 3：確認新增了 loadItemPrice 函數

確保 `loadItemPrice()` 函數也加入到 JavaScript 中。

## 優化效果

| 追蹤數量 | 優化前 | 優化後 |
|---------|--------|--------|
| 1 支 | 10-30 秒 | 10-30 秒 |
| 3 支 | 30-90 秒 | 10-30 秒 |
| 5 支 | 50-150 秒 | 10-30 秒 |
| 10 支 | 100-300 秒 | 10-30 秒 |

## 用戶體驗改善

1. ✅ **立即顯示清單**：不用等待價格
2. ✅ **並行載入**：所有價格同時查詢
3. ✅ **漸進式更新**：先完成的先顯示
4. ✅ **30 秒超時**：避免無限等待
